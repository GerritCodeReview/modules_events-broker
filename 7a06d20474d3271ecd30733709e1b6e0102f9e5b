{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "ac3ae0fd_6c0d0fa5",
        "filename": "pom.xml",
        "patchSetId": 21
      },
      "lineNbr": 7,
      "author": {
        "id": 1010134
      },
      "writtenOn": "2023-09-13T09:09:23Z",
      "side": 1,
      "message": "I\u0027d rather call this `3.4.9` when the default implementation for `ExtendedBrokerApi.topicSubscribersWithGroupId()` is provided. If not, this then should be `4.0.0`, as it introduces API-breaking changes.",
      "range": {
        "startLine": 7,
        "startChar": 13,
        "endLine": 7,
        "endChar": 20
      },
      "revId": "7a06d20474d3271ecd30733709e1b6e0102f9e5b",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7f2f435a_1e4e46e4",
        "filename": "pom.xml",
        "patchSetId": 21
      },
      "lineNbr": 7,
      "author": {
        "id": 1149185
      },
      "writtenOn": "2023-09-13T10:21:43Z",
      "side": 1,
      "message": "I think that your proposal makes sense to me but I think that the version evolution of libraries are aligned with the latest Gerrit version released, in this case `3.4.8`. Please @luca.milanesio@gmail.com can help us with this?",
      "parentUuid": "ac3ae0fd_6c0d0fa5",
      "range": {
        "startLine": 7,
        "startChar": 13,
        "endLine": 7,
        "endChar": 20
      },
      "revId": "7a06d20474d3271ecd30733709e1b6e0102f9e5b",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9aef43d5_28f5f0c9",
        "filename": "pom.xml",
        "patchSetId": 21
      },
      "lineNbr": 7,
      "author": {
        "id": 1149185
      },
      "writtenOn": "2023-09-13T11:51:28Z",
      "side": 1,
      "message": "I have been reading [1] and it states: \n\n```\nA plugin in Gerrit is tightly coupled code that runs in the same JVM as Gerrit.\nIt has full access to all server internals. Plugins are tightly coupled to a\nspecific major.minor server version and may require source code changes to compile\nagainst a different server version.\n\nPlugins may require a specific major.minor.patch server version and may need\nrebuild and revalidation across different patch levels. A different patch level may\n only add new API interfaces and never change or extend existing ones.\n```\n\nSo definitively it looks that the plugin itself does not follow the semantic\nversion per se and it is just incrementing the patch number every time there is a\nnew feature in the plugin.\n\nReferences:\n[1] https://gerrit-documentation.storage.googleapis.com/Documentation/3.4.8/dev-plugins.html",
      "parentUuid": "7f2f435a_1e4e46e4",
      "range": {
        "startLine": 7,
        "startChar": 13,
        "endLine": 7,
        "endChar": 20
      },
      "revId": "7a06d20474d3271ecd30733709e1b6e0102f9e5b",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "499f9f16_f089d7c9",
        "filename": "pom.xml",
        "patchSetId": 21
      },
      "lineNbr": 7,
      "author": {
        "id": 1010134
      },
      "writtenOn": "2023-09-13T12:31:22Z",
      "side": 1,
      "message": "OK, I understand the reasoning and agree that keeping the major and minor versions in sync makes things easier.\n\nThe thing that bothers me is that in case of libModules, that are exposing API for other plugins, changing that contract is a breaking change. This may confuse anyone who has adopted that API.\n\nSure the `ExtendedBrokerApi` interface was recently introduced, and probably no one has adopted it yet. But it is still a public API that was officially released.\n\nIt\u0027s just a semantics ;)\n\nAnyway, I\u0027d rather go with `3.4.9` and optionally add default implementation to `topicSubscribersWithGroupId()`.",
      "parentUuid": "9aef43d5_28f5f0c9",
      "range": {
        "startLine": 7,
        "startChar": 13,
        "endLine": 7,
        "endChar": 20
      },
      "revId": "7a06d20474d3271ecd30733709e1b6e0102f9e5b",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "445d0f90_742ff243",
        "filename": "pom.xml",
        "patchSetId": 21
      },
      "lineNbr": 7,
      "author": {
        "id": 1149185
      },
      "writtenOn": "2023-09-13T14:06:01Z",
      "side": 1,
      "message": "Your comments are fair. Lets wait the other to tell us.",
      "parentUuid": "499f9f16_f089d7c9",
      "range": {
        "startLine": 7,
        "startChar": 13,
        "endLine": 7,
        "endChar": 20
      },
      "revId": "7a06d20474d3271ecd30733709e1b6e0102f9e5b",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "cd417f4f_e205d6dd",
        "filename": "pom.xml",
        "patchSetId": 21
      },
      "lineNbr": 7,
      "author": {
        "id": 1010134
      },
      "writtenOn": "2023-09-14T16:34:12Z",
      "side": 1,
      "message": "I have a better overview new. Even though there are 27 commits on top of `v3.4.8` tag in the `stable-3.4` branch, it won\u0027t be released anyway, as it\u0027s already EOL\u0027d. So changing the version here to `3.4.9` would only complicate things.\n\nIt\u0027s a bit sad that we can\u0027t use \"in-tree version\", but need to go over maven repository in the `events-kafka` plugin.\n\nIn that context, having `3.4.8.1` makes more sense to me... It still doesn\u0027t _feel right_ ;) but at least has more sense ðŸ˜„\n\nOn this note, here\u0027s a snippet from [maven docs](https://docs.oracle.com/middleware/1212/core/MAVEN/maven_version.htm#MAVEN400):\n```\nFor example, Maven arranges the version list in the following manner:\n\n\n1.0.1.0\n1.0.10.1\n1.0.10.2\n1.0.9.3\nVersion 1.0.9.3 should come before 1.0.10.1 and 1.0.10.2, but the unexpected fourth field (.3) forced Maven to evaluate the version as a string.\n```\n\nHaving a fouth number will force maven to evaluate it as a string, which will result in unexpected ordering. IMO we should use the _build_ number instead, so this should be `3.4.8-1`",
      "parentUuid": "445d0f90_742ff243",
      "range": {
        "startLine": 7,
        "startChar": 13,
        "endLine": 7,
        "endChar": 20
      },
      "revId": "7a06d20474d3271ecd30733709e1b6e0102f9e5b",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "84b82269_93b2f461",
        "filename": "pom.xml",
        "patchSetId": 21
      },
      "lineNbr": 7,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2023-09-14T16:46:52Z",
      "side": 1,
      "message": "We can just consume it from source as well, as we do for JGit ;-)\nThat removes all the issues around versioning and also the pain to download it from Maven ;-)",
      "parentUuid": "cd417f4f_e205d6dd",
      "range": {
        "startLine": 7,
        "startChar": 13,
        "endLine": 7,
        "endChar": 20
      },
      "revId": "7a06d20474d3271ecd30733709e1b6e0102f9e5b",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "980dc18c_f8bf14f3",
        "filename": "src/main/java/com/gerritforge/gerrit/eventbroker/ExtendedBrokerApi.java",
        "patchSetId": 21
      },
      "lineNbr": 37,
      "author": {
        "id": 1010134
      },
      "writtenOn": "2023-09-13T09:09:23Z",
      "side": 1,
      "message": "Adding a method to the interface is a breaking change. We should either bump the major version or provide a default implementation for it in this interface.",
      "revId": "7a06d20474d3271ecd30733709e1b6e0102f9e5b",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "620f3a8f_a00467a1",
        "filename": "src/main/java/com/gerritforge/gerrit/eventbroker/ExtendedBrokerApi.java",
        "patchSetId": 21
      },
      "lineNbr": 37,
      "author": {
        "id": 1010134
      },
      "writtenOn": "2023-09-13T12:31:22Z",
      "side": 1,
      "message": "How about adding a default implementation:\n\n```java\ndefault Set\u003cTopicSubscriberWithGroupId\u003e topicSubscribersWithGroupId() {\n  return ImmutableSet.of\u003cTopicSubscriberWithGroupId\u003e()\n}\n```",
      "parentUuid": "980dc18c_f8bf14f3",
      "revId": "7a06d20474d3271ecd30733709e1b6e0102f9e5b",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "7d3c438a_81d0bf7e",
        "filename": "src/main/java/com/gerritforge/gerrit/eventbroker/ExtendedBrokerApi.java",
        "patchSetId": 21
      },
      "lineNbr": 37,
      "author": {
        "id": 1149185
      },
      "writtenOn": "2023-09-13T14:06:01Z",
      "side": 1,
      "message": "I like it and it is accurate with all your comments. I will do it",
      "parentUuid": "620f3a8f_a00467a1",
      "revId": "7a06d20474d3271ecd30733709e1b6e0102f9e5b",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "562a8ad5_32cd9c74",
        "filename": "src/main/java/com/gerritforge/gerrit/eventbroker/ExtendedBrokerApi.java",
        "patchSetId": 21
      },
      "lineNbr": 37,
      "author": {
        "id": 1083454
      },
      "writtenOn": "2023-09-13T14:14:35Z",
      "side": 1,
      "message": "\u003e Adding a method to the interface is a breaking change. We should either bump the major version or provide a default implementation for it in this interface.\n\n\nWe want to add new method which allows to subscribe to the topic with custom group id(by default it will use instanceId) but on stable branches we have to keep backward compatibility. That\u0027s why we have new interface `ExtendedBrokerApi` which is extending the `BrokerApi` so in stable-3.4 we will check if the plugin is providing implementation for the new methods if not we will fallback to the old approach. This will guarantee backward compatibility.\nOn master branch we are planning to remove the `ExtendedBrokerApi` and move those new methods to the `BrokerApi`. This will force all plugins to provide new functionality.\n\nWe were thinking about using default implementation in the `BrokerApi` but then we cannot distinguish if the plugin provided the implementation or we are using the default one.",
      "parentUuid": "620f3a8f_a00467a1",
      "revId": "7a06d20474d3271ecd30733709e1b6e0102f9e5b",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a1ec131a_be7d96a9",
        "filename": "src/main/java/com/gerritforge/gerrit/eventbroker/ExtendedBrokerApi.java",
        "patchSetId": 21
      },
      "lineNbr": 37,
      "author": {
        "id": 1149185
      },
      "writtenOn": "2023-09-13T14:44:17Z",
      "side": 1,
      "message": "By the book: the `default` makes sense to me because if there are customers already  that have implemented ExtendedBrokerApi in the version 3.4.8 and the upgrade to 3.4.8.1, that will break the code.",
      "parentUuid": "562a8ad5_32cd9c74",
      "revId": "7a06d20474d3271ecd30733709e1b6e0102f9e5b",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "283b6b80_cf0435a8",
        "filename": "src/main/java/com/gerritforge/gerrit/eventbroker/ExtendedBrokerApi.java",
        "patchSetId": 21
      },
      "lineNbr": 37,
      "author": {
        "id": 1010134
      },
      "writtenOn": "2023-09-14T16:34:12Z",
      "side": 1,
      "message": "ðŸ‘Œ",
      "parentUuid": "a1ec131a_be7d96a9",
      "revId": "7a06d20474d3271ecd30733709e1b6e0102f9e5b",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    }
  ]
}