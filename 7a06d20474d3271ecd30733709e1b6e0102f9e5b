{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "ac3ae0fd_6c0d0fa5",
        "filename": "pom.xml",
        "patchSetId": 21
      },
      "lineNbr": 7,
      "author": {
        "id": 1010134
      },
      "writtenOn": "2023-09-13T09:09:23Z",
      "side": 1,
      "message": "I\u0027d rather call this `3.4.9` when the default implementation for `ExtendedBrokerApi.topicSubscribersWithGroupId()` is provided. If not, this then should be `4.0.0`, as it introduces API-breaking changes.",
      "range": {
        "startLine": 7,
        "startChar": 13,
        "endLine": 7,
        "endChar": 20
      },
      "revId": "7a06d20474d3271ecd30733709e1b6e0102f9e5b",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7f2f435a_1e4e46e4",
        "filename": "pom.xml",
        "patchSetId": 21
      },
      "lineNbr": 7,
      "author": {
        "id": 1149185
      },
      "writtenOn": "2023-09-13T10:21:43Z",
      "side": 1,
      "message": "I think that your proposal makes sense to me but I think that the version evolution of libraries are aligned with the latest Gerrit version released, in this case `3.4.8`. Please @luca.milanesio@gmail.com can help us with this?",
      "parentUuid": "ac3ae0fd_6c0d0fa5",
      "range": {
        "startLine": 7,
        "startChar": 13,
        "endLine": 7,
        "endChar": 20
      },
      "revId": "7a06d20474d3271ecd30733709e1b6e0102f9e5b",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9aef43d5_28f5f0c9",
        "filename": "pom.xml",
        "patchSetId": 21
      },
      "lineNbr": 7,
      "author": {
        "id": 1149185
      },
      "writtenOn": "2023-09-13T11:51:28Z",
      "side": 1,
      "message": "I have been reading [1] and it states: \n\n```\nA plugin in Gerrit is tightly coupled code that runs in the same JVM as Gerrit.\nIt has full access to all server internals. Plugins are tightly coupled to a\nspecific major.minor server version and may require source code changes to compile\nagainst a different server version.\n\nPlugins may require a specific major.minor.patch server version and may need\nrebuild and revalidation across different patch levels. A different patch level may\n only add new API interfaces and never change or extend existing ones.\n```\n\nSo definitively it looks that the plugin itself does not follow the semantic\nversion per se and it is just incrementing the patch number every time there is a\nnew feature in the plugin.\n\nReferences:\n[1] https://gerrit-documentation.storage.googleapis.com/Documentation/3.4.8/dev-plugins.html",
      "parentUuid": "7f2f435a_1e4e46e4",
      "range": {
        "startLine": 7,
        "startChar": 13,
        "endLine": 7,
        "endChar": 20
      },
      "revId": "7a06d20474d3271ecd30733709e1b6e0102f9e5b",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "499f9f16_f089d7c9",
        "filename": "pom.xml",
        "patchSetId": 21
      },
      "lineNbr": 7,
      "author": {
        "id": 1010134
      },
      "writtenOn": "2023-09-13T12:31:22Z",
      "side": 1,
      "message": "OK, I understand the reasoning and agree that keeping the major and minor versions in sync makes things easier.\n\nThe thing that bothers me is that in case of libModules, that are exposing API for other plugins, changing that contract is a breaking change. This may confuse anyone who has adopted that API.\n\nSure the `ExtendedBrokerApi` interface was recently introduced, and probably no one has adopted it yet. But it is still a public API that was officially released.\n\nIt\u0027s just a semantics ;)\n\nAnyway, I\u0027d rather go with `3.4.9` and optionally add default implementation to `topicSubscribersWithGroupId()`.",
      "parentUuid": "9aef43d5_28f5f0c9",
      "range": {
        "startLine": 7,
        "startChar": 13,
        "endLine": 7,
        "endChar": 20
      },
      "revId": "7a06d20474d3271ecd30733709e1b6e0102f9e5b",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "445d0f90_742ff243",
        "filename": "pom.xml",
        "patchSetId": 21
      },
      "lineNbr": 7,
      "author": {
        "id": 1149185
      },
      "writtenOn": "2023-09-13T14:06:01Z",
      "side": 1,
      "message": "Your comments are fair. Lets wait the other to tell us.",
      "parentUuid": "499f9f16_f089d7c9",
      "range": {
        "startLine": 7,
        "startChar": 13,
        "endLine": 7,
        "endChar": 20
      },
      "revId": "7a06d20474d3271ecd30733709e1b6e0102f9e5b",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "980dc18c_f8bf14f3",
        "filename": "src/main/java/com/gerritforge/gerrit/eventbroker/ExtendedBrokerApi.java",
        "patchSetId": 21
      },
      "lineNbr": 37,
      "author": {
        "id": 1010134
      },
      "writtenOn": "2023-09-13T09:09:23Z",
      "side": 1,
      "message": "Adding a method to the interface is a breaking change. We should either bump the major version or provide a default implementation for it in this interface.",
      "revId": "7a06d20474d3271ecd30733709e1b6e0102f9e5b",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "620f3a8f_a00467a1",
        "filename": "src/main/java/com/gerritforge/gerrit/eventbroker/ExtendedBrokerApi.java",
        "patchSetId": 21
      },
      "lineNbr": 37,
      "author": {
        "id": 1010134
      },
      "writtenOn": "2023-09-13T12:31:22Z",
      "side": 1,
      "message": "How about adding a default implementation:\n\n```java\ndefault Set\u003cTopicSubscriberWithGroupId\u003e topicSubscribersWithGroupId() {\n  return ImmutableSet.of\u003cTopicSubscriberWithGroupId\u003e()\n}\n```",
      "parentUuid": "980dc18c_f8bf14f3",
      "revId": "7a06d20474d3271ecd30733709e1b6e0102f9e5b",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "7d3c438a_81d0bf7e",
        "filename": "src/main/java/com/gerritforge/gerrit/eventbroker/ExtendedBrokerApi.java",
        "patchSetId": 21
      },
      "lineNbr": 37,
      "author": {
        "id": 1149185
      },
      "writtenOn": "2023-09-13T14:06:01Z",
      "side": 1,
      "message": "I like it and it is accurate with all your comments. I will do it",
      "parentUuid": "620f3a8f_a00467a1",
      "revId": "7a06d20474d3271ecd30733709e1b6e0102f9e5b",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "562a8ad5_32cd9c74",
        "filename": "src/main/java/com/gerritforge/gerrit/eventbroker/ExtendedBrokerApi.java",
        "patchSetId": 21
      },
      "lineNbr": 37,
      "author": {
        "id": 1083454
      },
      "writtenOn": "2023-09-13T14:14:35Z",
      "side": 1,
      "message": "\u003e Adding a method to the interface is a breaking change. We should either bump the major version or provide a default implementation for it in this interface.\n\n\nWe want to add new method which allows to subscribe to the topic with custom group id(by default it will use instanceId) but on stable branches we have to keep backward compatibility. That\u0027s why we have new interface `ExtendedBrokerApi` which is extending the `BrokerApi` so in stable-3.4 we will check if the plugin is providing implementation for the new methods if not we will fallback to the old approach. This will guarantee backward compatibility.\nOn master branch we are planning to remove the `ExtendedBrokerApi` and move those new methods to the `BrokerApi`. This will force all plugins to provide new functionality.\n\nWe were thinking about using default implementation in the `BrokerApi` but then we cannot distinguish if the plugin provided the implementation or we are using the default one.",
      "parentUuid": "620f3a8f_a00467a1",
      "revId": "7a06d20474d3271ecd30733709e1b6e0102f9e5b",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    }
  ]
}